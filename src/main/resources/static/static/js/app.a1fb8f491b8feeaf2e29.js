webpackJsonp([3],{"7Ogj":function(t,e,n){t.exports=n.p+"static/img/logo.b4488fe.png"},"K+d8":function(t,e){t.exports={baseUrl:"http://192.168.0.212:9090"}},Mtie:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("+RKF"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("C7Lr")({name:"App"},o,!1,function(t){n("Mtie")},null,null).exports,s=n("urex"),i={props:["staffInfor"],data:function(){return{path:"",allPath:[{path:"/index/preview",name:"预览"},{path:"/index/deploy",name:"配置"}]}},computed:{},created:function(){},mounted:function(){this.path=this.$route.path},watch:{$route:{handler:function(t,e){this.path=t.fullPath}}},methods:{loginOut:function(){var t=this;sessionStorage.removeItem("token"),console.log(),null==window.sessionStorage.getItem("token")&&(this.$message("正在退出登录..."),setTimeout(function(){t.$router.replace("/login")},1e3))}},components:{}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[t._m(0),t._v(" "),n("div",{staticClass:"mune"},[n("ul",t._l(t.allPath,function(e,a){return n("router-link",{key:a,attrs:{to:e.path}},[n("li",{class:{active:t.path==e.path}},[t._v("\n          "+t._s(e.name)+"\n        ")])])}),1)]),t._v(" "),n("div",{staticClass:"user"},[n("ul",[n("li",[n("i",{staticClass:"el-icon-user-solid"}),t._v(" "+t._s(t.staffInfor.staffName))]),t._v(" "),n("li",{on:{click:t.loginOut}},[n("i",{staticClass:"el-icon-switch-button"}),t._v("\n        退出\n      ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:n("7Ogj"),alt:""}}),this._v(" "),e("span",[this._v("千湖视觉")])])}]};var c={props:[],data:function(){return{staffInfor:{}}},computed:{},created:function(){},mounted:function(){this.getStaffInfor()},watch:{},methods:{getStaffInfor:function(){var t=this;this.$axios.post("/data/getStaffInforByToken").then(function(e){t.staffInfor=e.data})}},components:{headerTitle:n("C7Lr")(i,u,!1,function(t){n("iNlj")},"data-v-338be2a2",null).exports}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("el-container",[e("el-header",[e("header-title",{attrs:{staffInfor:this.staffInfor}})],1),this._v(" "),e("el-main",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var f=n("C7Lr")(c,l,!1,function(t){n("QUwU")},"data-v-69b8ac57",null).exports,p={props:[],data:function(){return{formData:{account:"admin",password:"123456"}}},computed:{},created:function(){},mounted:function(){},watch:{},methods:{onSubmit:function(){var t=this;this.$axios.post("login",this.$qs.stringify(this.formData)).then(function(e){console.log("登录接口",e),200==e.data.status?(t.$message.success(e.data.message),t.$router.push("/index"),window.sessionStorage.setItem("token",e.headers.token)):t.$message.error(e.data.message)})},resetForm:function(t){this.$refs[t].resetFields()}},components:{}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_content"},[n("div",[n("el-form",{ref:"formData",attrs:{model:t.formData}},[n("el-form-item",{attrs:{label:"用户名",prop:"account"}},[n("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{"show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),t._v(" "),n("el-form-item",{staticClass:"buttons"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.onSubmit}},[t._v("登录")]),t._v(" "),n("el-button",{attrs:{type:"info",round:""},on:{click:function(e){return t.resetForm("formData")}}},[t._v("重置")])],1)],1)],1)])},staticRenderFns:[]};var m=n("C7Lr")(p,d,!1,function(t){n("sV7r")},"data-v-8a6ced96",null).exports;a.default.use(s.a);var h=new s.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:m},{path:"/index",name:"index",component:f,redirect:"/index/deploy",children:[{path:"preview",name:"preview",component:function(){return n.e(1).then(n.bind(null,"tIGg"))}},{path:"deploy",name:"deploy",component:function(){return n.e(0).then(n.bind(null,"HfhP"))}}]}]}),v=n("uR6q"),g=n.n(v),w=n("mw3O"),_=n.n(w),b=n("//Fk"),y=n.n(b),k=n("I29D"),$=n.n(k),x=n("K+d8"),I=n("zL8q"),C=n.n(I);$.a.defaults.baseURL=x.baseUrl,$.a.defaults.timeout=1e4,$.a.interceptors.request.use(function(t){return t.headers.Authorization=window.sessionStorage.getItem("token"),t},function(t){return y.a.reject("catch",t)}),$.a.interceptors.response.use(function(t){return t},function(t){if(console.log("请求失败",t),t.response){if(t.response.status){switch(t.response.status){case 403:Object(I.Message)({message:"此账号无权限！",type:"warning",center:!0}),sessionStorage.removeItem("token"),setTimeout(function(){router.replace({path:"/login",query:{redirect:router.currentRoute.fullPath}})},1e3);break;case 404:Object(I.Message)({message:"网络请求不存在",type:"warning",center:!0});break;case 400:Object(I.Message)({message:"输入的参数有误，请重新输入！",type:"warning",center:!0});break;default:Object(I.Message)({message:t.response.data.message,type:"warning"})}return y.a.reject(t.response)}}else Object(I.Message)({message:t})});var O=$.a;n("tvR6");a.default.use(g.a),a.default.prototype.$qs=_.a,a.default.prototype.$axios=O,a.default.config.productionTip=!1,a.default.use(C.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:h,components:{App:r},template:"<App/>"})},QUwU:function(t,e){},iNlj:function(t,e){},sV7r:function(t,e){},tvR6:function(t,e){},uR6q:function(t,e){e.install=function(t,e){t.prototype.$sortForArray=function(t){return function(e,n){return e[t]-n[t]}}}}},["NHnr"]);
//# sourceMappingURL=app.a1fb8f491b8feeaf2e29.js.map