webpackJsonp([0],{Gp32:function(e,a){},HfhP:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("Dd8w"),i=t.n(n),r={props:["cameraInfor","isEdit"],data:function(){return{cameraInfo:{account:"",password:"",ip:"",isInMachine:!1,originPos:"",port:"",rtspUrl:"",wayNum:"",cameraName:""},activeName:"first",id:1,title:"基本信息"}},computed:{},created:function(){},mounted:function(){},watch:{cameraInfor:function(){this.cameraInfo=i()({},this.cameraInfor),console.log("cameraInfor",this.cameraInfor)},isEdit:function(){console.log(this.isEdit),this.isEdit?this.title="基本信息":this.isEdit||(this.title="新增摄像头")}},methods:{saveInfo:function(){var e=this,a=void 0;this.cameraInfo.id?(a="update",this.id=this.cameraInfo.id):a="save",this.$axios.post("/data/camera/"+a,this.cameraInfo).then(function(t){console.log("保存摄像头",t),e.$emit("closeEdit",a),e.id=1,e.$message.success("保存成功")})}},components:{}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"editCamera"},[t("el-tabs",{model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.title,name:"first"}},[t("el-form",{ref:"form",attrs:{model:e.cameraInfo,"label-width":"90px","label-position":"left"}},[t("el-form-item",{attrs:{label:"摄像头名字"}},[t("el-input",{model:{value:e.cameraInfo.cameraName,callback:function(a){e.$set(e.cameraInfo,"cameraName",a)},expression:"cameraInfo.cameraName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"账号"}},[t("el-input",{model:{value:e.cameraInfo.account,callback:function(a){e.$set(e.cameraInfo,"account",a)},expression:"cameraInfo.account"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{model:{value:e.cameraInfo.password,callback:function(a){e.$set(e.cameraInfo,"password",a)},expression:"cameraInfo.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"ip地址"}},[t("el-input",{model:{value:e.cameraInfo.ip,callback:function(a){e.$set(e.cameraInfo,"ip",a)},expression:"cameraInfo.ip"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"接入录像机"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.cameraInfo.isInMachine,callback:function(a){e.$set(e.cameraInfo,"isInMachine",a)},expression:"cameraInfo.isInMachine"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"初始位置"}},[t("el-input",{model:{value:e.cameraInfo.originPos,callback:function(a){e.$set(e.cameraInfo,"originPos",a)},expression:"cameraInfo.originPos"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"端口"}},[t("el-input",{model:{value:e.cameraInfo.port,callback:function(a){e.$set(e.cameraInfo,"port",a)},expression:"cameraInfo.port"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"rtsp"}},[t("el-input",{model:{value:e.cameraInfo.rtspUrl,callback:function(a){e.$set(e.cameraInfo,"rtspUrl",a)},expression:"cameraInfo.rtspUrl"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"通道号"}},[t("el-input",{model:{value:e.cameraInfo.wayNum,callback:function(a){e.$set(e.cameraInfo,"wayNum",a)},expression:"cameraInfo.wayNum"}})],1),e._v(" "),t("el-button",{attrs:{type:"danger",round:""},on:{click:e.saveInfo}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var o={props:[],data:function(){return{cameraList:[],cameraInfor:{},currentIndex:0,isEdit:!0}},computed:{},created:function(){},mounted:function(){this.getAllCamera()},watch:{},methods:{getAllCamera:function(){var e=this;this.$axios.post("/data/camera/findAll").then(function(a){console.log("摄像头列表",a);var t=a.data;t.sort(e.$sortForArray("id")),e.cameraList=t,console.log("this.currentIndex",e.currentIndex),e.cameraInfor=e.cameraList[e.currentIndex]})},handleClick:function(e,a){this.cameraInfor=e,this.currentIndex=a},addCamera:function(){this.cameraList.push({cameraName:"new"}),this.cameraInfor={account:"",password:"",ip:"",isInMachine:!1,originPos:"",port:"",rtspUrl:"",wayNum:"",cameraName:""},this.currentIndex=this.cameraList.length-1,this.isEdit=!1},delCamera:function(e){var a=this;console.log("id",e),console.log("isEdit",this.isEdit),this.isEdit||void 0!=e?this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete("/data/camera/deleteById/"+e).then(function(e){"success"==e.data?a.$message.success("删除成功"):a.$confirm(e.data,"提示",{showCancelButton:!1,type:"warning",center:!0}),a.currentIndex=0,a.getAllCamera()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})}):(this.currentIndex=0,this.isEdit=!0,this.getAllCamera())},closeEdit:function(e){console.log("currentIndex",this.currentIndex),"save"==e&&(this.currentIndex=0),this.isEdit=!0,this.getAllCamera()}},components:{editCamera:t("C7Lr")(r,c,!1,function(e){t("wtZS")},"data-v-b1b72296",null).exports}},s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"deploy_content"},[t("div",{staticClass:"left"},[t("aside",[e._v("\n      摄像头列表\n      "),t("i",{staticClass:"el-icon-circle-plus",on:{click:e.addCamera}})]),e._v(" "),t("ul",e._l(e.cameraList,function(a,n){return t("li",{key:n,class:{active:e.currentIndex==n},on:{click:function(t){return e.handleClick(a,n)}}},[e._v("\n        "+e._s(a.cameraName)+"\n\n        "),t("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.delCamera(a.id)}}})])}),0)]),e._v(" "),t("div",{staticClass:"right"},[t("edit-camera",{attrs:{cameraInfor:e.cameraInfor,isEdit:e.isEdit},on:{closeEdit:e.closeEdit}})],1)])},staticRenderFns:[]};var l=t("C7Lr")(o,s,!1,function(e){t("Gp32")},"data-v-43632ec5",null);a.default=l.exports},wtZS:function(e,a){}});
//# sourceMappingURL=0.94d744ede913249762b6.js.map